generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  email     String @unique
  password  String
  firstName String
  lastName  String
  phone     String
  image     String
  role      Role   @default(driver)
  jobs      Job[]
}

model Job {
  id              String          @id @default(auto()) @map("_id") @db.ObjectId
  owner           User            @relation(fields: [ownerId], references: [id])
  ownerId         String          @db.ObjectId
  jobStatus       JobStatus
  quote           Int?
  revenue         Int?
  street          String
  suburb          String
  city            String
  postcode        String
  timeWindow      TimeWindow
  typeOfRubbish   TypeOfRubbish[]
  bookingDateTime DateTime
  firstConfirm    Boolean
  secondConfirm   Boolean
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt
  Customer        Customer?       @relation(fields: [customerId], references: [id])
  customerId      String?         @db.ObjectId
}

model Customer {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  street         String
  suburb         String
  city           String
  postcode       String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  jobs           Job[]
  numberOfJobs   Int
  totalRevenue   Int
  mobilePhone    String
  alternatePhone String
}

enum TypeOfRubbish {
  sofa
  mattress
  fridge
  washing_machine
  misc
}

enum Role {
  admin
  office
  driver
}

enum TimeWindow {
  none
  six_am
  seven_am
  eight_am
  nine_am
  ten_am
  eleven_am
  twelve_pm
  one_pm
  two_pm
  three_pm
  four_pm
  five_pm
}

enum JobStatus {
  created
  quoted
  paid
  cancelled
}
